document.addEventListener("DOMContentLoaded",function(){const t=window.location.origin;document.querySelectorAll(".quickview").forEach(n=>{n.addEventListener("click",function(){const r=this.getAttribute("data-id");document.querySelector("#modalProduct .modal-body h2").innerText="Загрузка...",document.querySelector("#modalProduct .modal-body .new-price").innerText="",document.querySelector("#modalProduct .modal-body .swiper-container .swiper-wrapper").innerHTML="",fetch(`${t}/api/product/${r}`).then(e=>{if(!e.ok)throw new Error("Ошибка загрузки данных");return e.json()}).then(e=>{const c=e.title||"---",d=e.price||"---",i=e.sku||"---",l=e.unit==="шт"?"<span>шт.</span>":"<span>м<sup>2</sup></span>",u=e.collection?e.collection.title:"---",s=e.brand?e.brand.title:"---",m=e.description||"---",a=e.images&&e.images.length>0?e.images:[{title:null}];document.querySelector("#modalProduct .modal-body h2").innerText=c,document.querySelector("#modalProduct .modal-body .new-price").innerText=`${d} ₽`,document.querySelector("#modalProduct .modal-body .new-sku").innerText=i,document.querySelector("#modalProduct .modal-body .new-unit").innerHTML=l,document.querySelector("#modalProduct .modal-body .new-collection").innerText=u,document.querySelector("#modalProduct .modal-body .new-brand").innerText=s,document.querySelector("#modalProduct .modal-body .new-description").innerText=m,document.querySelector("#modalProduct .modal-body .swiper-container .swiper-wrapper").innerHTML=a.map(o=>`
                            <div class="swiper-slide" style="border: none;">
                                <img class="img-responsive m-auto"
                                    src="${o.title?`${t}/storage/images/${o.title}`:`${t}/assets/images/stock/stock-image.png`}"
                                    alt="${o.title?o.title:"Изображение по умолчанию"}">
                            </div>
                        `).join("")}).catch(e=>{console.error(e),document.querySelector("#modalProduct .modal-body h2").innerText="Ошибка загрузки данных"})})})});
